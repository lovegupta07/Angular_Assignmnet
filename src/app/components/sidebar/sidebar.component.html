<div class="sidebar" [class.collapsed]="collapsed">
  <!-- Logo & Toggle -->
  <div class="logo-toggle">
    <div class="logo text-white fw-bold">logo</div>
    <button class="toggle-btn" (click)="toggleSidebar()">
      {{ collapsed ? '>' : '<' }} </button>
  </div>

  <!-- Profile Info -->
  <div class="profile-box mt-3">
    <img src="../../../assets/images/Profile.png" alt="profile" (click)="userDetails=true" style="cursor: pointer;"
      class="profile-img" />
    <div class="profile-info" *ngIf="!collapsed">
      <div class="profile-name">{{ userName }}</div>
      <div class="profile-role">{{ userRole }}</div>
    </div>
  </div>


  <!-- User Details Modal -->
  <div class="user-details-backdrop" *ngIf="userDetails" (click)="closeUserDetails()">
    <div class="user-details-content" (click)="$event.stopPropagation()">
      <app-user-details></app-user-details>
    </div>
  </div>



  <!-- Sidebar Menu -->
  <ul class="nav flex-column sidebar-menu w-100 mt-4">
    <li class="nav-item">
      <div class="sidebar-item d-flex align-items-center" routerLink="welcome">
        <i class="bi bi-house-door-fill"></i>
        <span *ngIf="!collapsed">Home</span>
      </div>
    </li>
    <li class="nav-item">
      <div class="sidebar-item d-flex align-items-center" routerLink="add-user">
        <i class="bi bi-plus-circle"></i>
        <span *ngIf="!collapsed">Add User</span>
      </div>
    </li>
    <li class="nav-item">
      <div class="sidebar-item d-flex align-items-center" routerLink="user-list">
        <i class="bi bi-list-ul"></i>
        <span *ngIf="!collapsed">User List</span>
      </div>
    </li>
  </ul>

  <!-- Settings Icon -->
  <div class="settings-icon-wrapper" (click)="toggleSettingsDropdown()">
    <i class="bi bi-gear-fill"></i>
  </div>

  <!-- Settings Dropdown -->
  <div *ngIf="settingsDropdownVisible" class="settings-dropdown-box" (click)="$event.stopPropagation()">
    <div class="dropdown-item" (click)="openChangePasswordModal()">Change Password</div>
    <div class="dropdown-item" (click)="logout()">Logout</div>
  </div>

  <!-- Change Password -->
  <div class="changePassword-backdrop" *ngIf="changePasswordModal" (click)="closeChangePasswordModal()">
    <div class="changePassword-content" (click)="$event.stopPropagation()">
      <app-change-password></app-change-password>
    </div>
  </div>

  <!-- Add User Modal (Invite User) -->
  <div class="invite-user-backdrop" *ngIf="addInviteModal" (click)="closeAddInviteModal()">
    <div class="invite-user-content" (click)="$event.stopPropagation()">
      <app-invite-user (userAddedAndNext)="onUserAddedAndNext()" (userAdded)="onUserAdded()"></app-invite-user>
    </div>
  </div>